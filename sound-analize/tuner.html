<!DOCTYPE html>
<html>
<head>
  <title>tornado WebSocket example</title>
  <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</head>
<body>
  <input type='range' id='slider'></input>
  <input type='text' id='note'></input>
  <script>
    var ws = new WebSocket('ws://{{ ip }}:8888/ws');

    ws.onopen = function(){
        console.log('opened')
    };
    ws.onmessage = function(ev){



     ev.data = JSON.parse(ev.data)

        ev.data.frequency=0
      console.log('value set to: ', ev.data)
      slider.value = ev.data.volume
      note.value = ev.data.note
    };
    ws.onclose = function(ev){
      console.log('closed')
    };
    ws.onerror = function(ev){
      console.log('error: ', ev)
    };
  </script>
</body>
</html>
